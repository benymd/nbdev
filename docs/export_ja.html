---

title: モジュールのエクスポート

keywords: fastai
sidebar: home_sidebar

summary: "ライブラリ内のノートブックを変換する関数"
description: "ライブラリ内のノートブックを変換する関数"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_export_ja.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>このモジュールで定義されている最も重要な関数は <code>notebooks2script</code>です。
残りをスクロールする前にそこにジャンプしたいかもしれませんが、
ここではノートブックからライブラリへの変換の舞台裏の詳細を説明しています。</p>
<p>覚えておくべき主なものは次のとおりです。</p>
<ul>
<li>エクスポートしたい各セルに <code>＃export</code> フラグを付けます</li>
<li>ドキュメントに示されているソースコードでエクスポートしたい各セルに、（エクスポートと表示のための）<code>＃exports</code>フラグを付けます</li>
<li><code>__all__</code> に追加せずエクスポートしたい各セルに（internalのエクスポートのための）<code>＃exporti</code>フラグを付けます</li>
<li>1つのセルには、<code>＃default_exp</code>フラグとそれに続くモジュール名（サブモジュールのポイントとpy拡張子なし）を含める必要があります。</li>
<li>1つのセルには、<code>＃default_exp</code>フラグの後に、エクスポート先のモジュール名（サブモジュールのポイントとpy拡張子なし）を指定する必要があります。（1つの特定のセルを別のモジュールにエクスポートする必要がある場合は、<code>＃export</code>フラグの後：<code>＃export special.module</code> を指定します）</li>
<li>等式、関数、クラスのすべての左のメンバーがエクスポートされ、プライベートではない変数が自動的に <code>__all__</code>に入れられます</li>
<li>自動的に選択されない場合に <code>__all__</code>に何かを追加するには、エクスポートされたセルに <code>_all_ = ["my_name"]</code> のようなものを記述します（単一の下線は意図的なものです）</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#22522;&#26412;&#30340;&#12394;&#22522;&#30436;">&#22522;&#26412;&#30340;&#12394;&#22522;&#30436;<a class="anchor-link" href="#&#22522;&#26412;&#30340;&#12394;&#22522;&#30436;"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>nbdev</code>のブートストラップ用　<code>imports</code>で定義されたいくつかの基本的な基盤があり、ここで show をテストします。
まず、簡単な設定ファイルクラス<code>Config</code>、これは、<code>settings.ini</code>ファイルの内容を読み取り、アクセス可能にします：</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h3 id="Config" class="doc_header"><code>Config</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/imports.py#L36" class="source_link" style="float:right">[source]</a></h3><blockquote><p><code>Config</code>(<strong><code>cfg_name</code></strong>=<em><code>'settings.ini'</code></em>)</p>
</blockquote>
<p>Store the basic information for nbdev to work</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">create_config</span><span class="p">(</span><span class="s2">&quot;github&quot;</span><span class="p">,</span> <span class="s2">&quot;nbdev&quot;</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s1">&#39;fastai&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="n">tst_flags</span><span class="o">=</span><span class="s1">&#39;tst&#39;</span><span class="p">,</span> <span class="n">cfg_name</span><span class="o">=</span><span class="s1">&#39;test_settings.ini&#39;</span><span class="p">)</span>
<span class="n">cfg</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="n">cfg_name</span><span class="o">=</span><span class="s1">&#39;test_settings.ini&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">lib_name</span><span class="p">,</span> <span class="s1">&#39;nbdev&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">git_url</span><span class="p">,</span> <span class="s2">&quot;https://github.com/fastai/nbdev/tree/master/&quot;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">lib_path</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="o">/</span><span class="s1">&#39;nbdev&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">nbs_path</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">())</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">doc_path</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">.</span><span class="n">parent</span><span class="o">/</span><span class="s1">&#39;docs&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">custom_sidebar</span><span class="p">,</span> <span class="s1">&#39;False&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>現在の環境を確認するために、いくつかの有用な変数を導出します：</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;IN_TEST&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">IN_NOTEBOOK</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">IN_COLAB</span>
    <span class="k">assert</span> <span class="n">IN_IPYTHON</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>次に、いくつかのutil関数があります。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="last_index" class="doc_header"><code>last_index</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/imports.py#L64" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>last_index</code>(<strong><code>x</code></strong>, <strong><code>o</code></strong>)</p>
</blockquote>
<p>Finds the last index of occurence of <code>x</code> in <code>o</code> (returns -1 if no occurence)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">last_index</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">]),</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">last_index</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">]),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">last_index</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">]),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="compose" class="doc_header"><code>compose</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/imports.py#L102" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>compose</code>(<strong>*<code>funcs</code></strong>, <strong><code>order</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Create a function that composes all functions in <code>funcs</code>, passing along remaining <code>*args</code> and <code>**kwargs</code> to all</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">f1</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">o</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span> <span class="p">(</span><span class="n">o</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="n">p</span>
<span class="n">f2</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">o</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span> <span class="p">(</span><span class="n">o</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">p</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">f2</span><span class="p">(</span><span class="n">f1</span><span class="p">(</span><span class="mi">3</span><span class="p">)),</span> <span class="n">compose</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span><span class="n">f2</span><span class="p">)(</span><span class="mi">3</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">f2</span><span class="p">(</span><span class="n">f1</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span><span class="n">p</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="n">compose</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span><span class="n">f2</span><span class="p">)(</span><span class="mi">3</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">f2</span><span class="p">(</span><span class="n">f1</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span>  <span class="mi">3</span><span class="p">),</span>  <span class="mi">3</span><span class="p">),</span> <span class="n">compose</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span><span class="n">f2</span><span class="p">)(</span><span class="mi">3</span><span class="p">,</span>  <span class="mi">3</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parallel" class="doc_header"><code>parallel</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/imports.py#L133" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parallel</code>(<strong><code>f</code></strong>, <strong><code>items</code></strong>, <strong>*<code>args</code></strong>, <strong><code>n_workers</code></strong>=<em><code>None</code></em>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Applies <code>func</code> in parallel to <code>items</code>, using <code>n_workers</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">time</span><span class="o">,</span><span class="nn">random</span>

<span class="k">def</span> <span class="nf">add_one</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span> 
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">a</span>

<span class="n">inp</span><span class="p">,</span><span class="n">exp</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">51</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">parallel</span><span class="p">(</span><span class="n">add_one</span><span class="p">,</span> <span class="n">inp</span><span class="p">,</span> <span class="n">n_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">exp</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">parallel</span><span class="p">(</span><span class="n">add_one</span><span class="p">,</span> <span class="n">inp</span><span class="p">,</span> <span class="n">n_workers</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="n">exp</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">parallel</span><span class="p">(</span><span class="n">add_one</span><span class="p">,</span> <span class="n">inp</span><span class="p">,</span> <span class="n">n_workers</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">52</span><span class="p">)))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">parallel</span><span class="p">(</span><span class="n">add_one</span><span class="p">,</span> <span class="n">inp</span><span class="p">,</span> <span class="n">n_workers</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">52</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="first" class="doc_header"><code>first</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L12" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>first</code>(<strong><code>x</code></strong>)</p>
</blockquote>
<p>First element of <code>x</code>, or None if missing</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#12494;&#12540;&#12488;&#12398;&#35501;&#12415;&#36796;&#12415;">&#12494;&#12540;&#12488;&#12398;&#35501;&#12415;&#36796;&#12415;<a class="anchor-link" href="#&#12494;&#12540;&#12488;&#12398;&#35501;&#12415;&#36796;&#12415;"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#12494;&#12540;&#12488;&#12502;&#12483;&#12463;&#12392;&#12399;?">&#12494;&#12540;&#12488;&#12502;&#12483;&#12463;&#12392;&#12399;?<a class="anchor-link" href="#&#12494;&#12540;&#12488;&#12502;&#12483;&#12463;&#12392;&#12399;?"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>jupyterノートブックは、内部ではjsonファイルです。
jsonモジュールで読み取るだけで、ネストされた辞書の辞書/辞書のリストが返されますが、jsonの読み取りと<code>nbformat</code>のツールの使用には若干の違いがあるため、これを使用します。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_nb" class="doc_header"><code>read_nb</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L18" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_nb</code>(<strong><code>fname</code></strong>)</p>
</blockquote>
<p>Read the notebook in <code>fname</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>fname</code>は文字列またはpathlibオブジェクトです。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_nb</span> <span class="o">=</span> <span class="n">read_nb</span><span class="p">(</span><span class="s1">&#39;00_export.ipynb&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ルートには4つのキーがあります：
<code>cells</code>はノートブックのセルを含み、
ノートブックの実行に使用されるpythonのバージョンに関連するいくつかの<code>metadata</code>、
<code>nbformat</code>と<code>nbformat_minor</code>はnbformatのバージョンです。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_nb</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>dict_keys([&#39;cells&#39;, &#39;metadata&#39;, &#39;nbformat&#39;, &#39;nbformat_minor&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_nb</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;jupytext&#39;: {&#39;split_at_heading&#39;: True},
 &#39;kernelspec&#39;: {&#39;display_name&#39;: &#39;Python 3&#39;,
  &#39;language&#39;: &#39;python&#39;,
  &#39;name&#39;: &#39;python3&#39;},
 &#39;language_info&#39;: {&#39;codemirror_mode&#39;: {&#39;name&#39;: &#39;ipython&#39;, &#39;version&#39;: 3},
  &#39;file_extension&#39;: &#39;.py&#39;,
  &#39;mimetype&#39;: &#39;text/x-python&#39;,
  &#39;name&#39;: &#39;python&#39;,
  &#39;nbconvert_exporter&#39;: &#39;python&#39;,
  &#39;pygments_lexer&#39;: &#39;ipython3&#39;,
  &#39;version&#39;: &#39;3.7.4&#39;}}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{test_nb[&#39;nbformat&#39;]}</span><span class="s2">.</span><span class="si">{test_nb[&#39;nbformat_minor&#39;]}</span><span class="s2">&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;4.4&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>cellsキーには、セルのリストが含まれています。
それぞれが、タイプ（codeまたはmarkdown）、ソース（セルに書き込まれるもの）、出力（コードセルの場合）などのエントリを含む新しい辞書です。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_nb</span><span class="p">[</span><span class="s1">&#39;cells&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;cell_type&#39;: &#39;code&#39;,
 &#39;execution_count&#39;: None,
 &#39;metadata&#39;: {&#39;hide_input&#39;: False},
 &#39;outputs&#39;: [],
 &#39;source&#39;: &#39;# export\nfrom nbdev.imports import *\nfrom fastscript import *&#39;}</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Finding-patterns">Finding patterns<a class="anchor-link" href="#Finding-patterns"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>次の関数は、コードセルで使用されるフラグをキャッチするために使用されます。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="check_re" class="doc_header"><code>check_re</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>check_re</code>(<strong><code>cell</code></strong>, <strong><code>pat</code></strong>, <strong><code>code_only</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>Check if <code>cell</code> contains a line with regex <code>pat</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pat</code>は文字列またはコンパイル済みの正規表現です。<code>code_only=True</code>の場合、この関数はマークダウンセルを無視します。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cell</span> <span class="o">=</span> <span class="n">test_nb</span><span class="p">[</span><span class="s1">&#39;cells&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">check_re</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;# export&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="k">assert</span> <span class="n">check_re</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;# export&#39;</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="k">assert</span> <span class="n">check_re</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;# bla&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;cell_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;markdown&#39;</span>
<span class="k">assert</span> <span class="n">check_re</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;# export&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="k">assert</span> <span class="n">check_re</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;# export&#39;</span><span class="p">,</span> <span class="n">code_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_export" class="doc_header"><code>is_export</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L67" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_export</code>(<strong><code>cell</code></strong>, <strong><code>default</code></strong>)</p>
</blockquote>
<p>Check if <code>cell</code> is to be exported and returns the name of the module to export it if provided</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>エクスポートするセルは、<code>＃export</code>、<code>＃exports</code>、または <code>＃exporti</code>コードでマークされ、エクスポートするモジュール名が付けられる可能性があります。
デフォルトのモジュールは、ノートブック内（通常は最上部）の <code>#default_exp bla</code>形式のセルで指定されますが、この関数では、通り過ぎる必要があります（最終的なスクリプトはノートブック全体を読み取ってそれを見つけます）。</p>
<ul>
<li><code># export</code>、<code># exports</code> または <code># exporti</code>でマークされたセルは、デフォルトのモジュールにエクスポートされます</li>
<li><code># export special.module</code>、 <code># exports special.module</code> または <code># exporti special.module</code> でマークされたセルは、special.module（<code>lib_name</code>/special/ module.py にあります）にエクスポートされます</li>
<li><code>＃export</code>でマークされたセルには、ドキュメントに署名が追加されます</li>
<li><code>＃exports</code>でマークされたセルには、ソースコードがドキュメントに追加されます</li>
<li><code>＃exporti</code>でマークされたセルはドキュメントに表示されず、<code>__all__</code>にも追加されません。</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cell</span> <span class="o">=</span> <span class="n">test_nb</span><span class="p">[</span><span class="s1">&#39;cells&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;export&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;# exports&quot;</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;export&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;# exporti&quot;</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;export&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;# export mod&quot;</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;mod&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;# export mod.file&quot;</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;mod</span><span class="si">{os.path.sep}</span><span class="s1">file&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;# exporti mod.file&quot;</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">),</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;mod</span><span class="si">{os.path.sep}</span><span class="s1">file&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;# expt mod.file&quot;</span>
<span class="k">assert</span> <span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;# exportmod.file&quot;</span>
<span class="k">assert</span> <span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="n">cell</span><span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;# exportsmod.file&quot;</span>
<span class="k">assert</span> <span class="n">is_export</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="s1">&#39;export&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_default_export" class="doc_header"><code>find_default_export</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L92" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_default_export</code>(<strong><code>cells</code></strong>)</p>
</blockquote>
<p>Find in <code>cells</code> the default export module.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code># default_exp</code>フラグ（複数ある場合）を含む最初のセルで停止し、後ろの値を返します。
そのコードのセルがない場合は<code>None</code>を返します。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">find_default_export</span><span class="p">(</span><span class="n">test_nb</span><span class="p">[</span><span class="s1">&#39;cells&#39;</span><span class="p">]),</span> <span class="s1">&#39;export&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">find_default_export</span><span class="p">(</span><span class="n">test_nb</span><span class="p">[</span><span class="s1">&#39;cells&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">:])</span> <span class="ow">is</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#12456;&#12463;&#12473;&#12509;&#12540;&#12488;&#12373;&#12428;&#12383;&#12377;&#12409;&#12390;&#12398;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#12522;&#12473;&#12488;">&#12456;&#12463;&#12473;&#12509;&#12540;&#12488;&#12373;&#12428;&#12383;&#12377;&#12409;&#12390;&#12398;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#12522;&#12473;&#12488;<a class="anchor-link" href="#&#12456;&#12463;&#12473;&#12509;&#12540;&#12488;&#12373;&#12428;&#12383;&#12377;&#12409;&#12390;&#12398;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#12522;&#12473;&#12488;"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>次の関数は、エクスポートされるすべてのリストを作成して、エクスポートされたモジュールに適切な <code>__all__</code>を準備します。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tst</span> <span class="o">=</span> <span class="n">_re_patch_func</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">@patch</span>
<span class="s2">@log_args(a=1)</span>
<span class="s2">def func(obj:Class):&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">tst</span><span class="p">,</span> <span class="n">tst</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(&lt;re.Match object; span=(1, 42), match=&#39;@patch\n@log_args(a=1)\ndef func(obj:Class)&#39;&gt;,
 (&#39;func&#39;, &#39;Class&#39;, None))</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_names" class="doc_header"><code>export_names</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L155" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_names</code>(<strong><code>code</code></strong>, <strong><code>func_only</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Find the names of the objects, functions or classes defined in <code>code</code> that are exported.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>この関数は、=、関数、またはクラス（たとえば、クラスメソッドは不要）の左側にあるインデントされていないオブジェクトだけを選択し、（<code>_</code>で始まる）プライベート名を除外しますが、ダンダー名は除外しません。
<code>func_only=True</code>の場合、オブジェクトではなく関数とクラス名のみを返します。</p>
<p>fastaiが追加したPython機能を適切に使用するために、この関数は（複数回定義されているため） <code>@typedispatch</code>で修飾された関数を無視し、<code>@patch</code>で修飾された関数を適切にラップ解除します。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def my_func(x):</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">class MyClass():&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;my_func&quot;</span><span class="p">,</span> <span class="s2">&quot;MyClass&quot;</span><span class="p">])</span>

<span class="c1">#Indented funcs are ignored (funcs inside a class)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;  def my_func(x):</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">class MyClass():&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;MyClass&quot;</span><span class="p">])</span>

<span class="c1">#Private funcs are ignored, dunder are not</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def _my_func():</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">class MyClass():&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;MyClass&quot;</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;__version__ = 1:</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">class MyClass():&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;MyClass&quot;</span><span class="p">,</span> <span class="s2">&quot;__version__&quot;</span><span class="p">])</span>

<span class="c1">#trailing spaces</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def my_func ():</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">class MyClass():&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;my_func&quot;</span><span class="p">,</span> <span class="s2">&quot;MyClass&quot;</span><span class="p">])</span>

<span class="c1">#class without parenthesis</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def my_func ():</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">class MyClass:&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;my_func&quot;</span><span class="p">,</span> <span class="s2">&quot;MyClass&quot;</span><span class="p">])</span>

<span class="c1">#object and funcs</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def my_func ():</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">default_bla=[]:&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;my_func&quot;</span><span class="p">,</span> <span class="s2">&quot;default_bla&quot;</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def my_func ():</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">default_bla=[]:&quot;</span><span class="p">,</span> <span class="n">func_only</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;my_func&quot;</span><span class="p">])</span>

<span class="c1">#Private objects are ignored</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def my_func ():</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">_default_bla = []:&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;my_func&quot;</span><span class="p">])</span>

<span class="c1">#Objects with dots are privates if one part is private</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def my_func ():</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">default.bla = []:&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;my_func&quot;</span><span class="p">,</span> <span class="s2">&quot;default.bla&quot;</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;def my_func ():</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">default._bla = []:&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;my_func&quot;</span><span class="p">])</span>

<span class="c1">#Monkey-path with @patch are properly renamed</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;@patch</span><span class="se">\n</span><span class="s2">def my_func(x:Class):</span><span class="se">\n</span><span class="s2">  pass&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;Class.my_func&quot;</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;@patch</span><span class="se">\n</span><span class="s2">def my_func(x:Class):</span><span class="se">\n</span><span class="s2">  pass&quot;</span><span class="p">,</span> <span class="n">func_only</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;Class.my_func&quot;</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;some code</span><span class="se">\n</span><span class="s2">@patch</span><span class="se">\n</span><span class="s2">def my_func(x:Class, y):</span><span class="se">\n</span><span class="s2">  pass&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;Class.my_func&quot;</span><span class="p">])</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;some code</span><span class="se">\n</span><span class="s2">@patch</span><span class="se">\n</span><span class="s2">def my_func(x:(Class1,Class2), y):</span><span class="se">\n</span><span class="s2">  pass&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;Class1.my_func&quot;</span><span class="p">,</span> <span class="s2">&quot;Class2.my_func&quot;</span><span class="p">])</span>

<span class="c1">#Check delegates</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;@delegates(keep=True)</span><span class="se">\n</span><span class="s2">class someClass:</span><span class="se">\n</span><span class="s2">  pass&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;someClass&quot;</span><span class="p">])</span>

<span class="c1">#Typedispatch decorated functions shouldn&#39;t be added</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">export_names</span><span class="p">(</span><span class="s2">&quot;@patch</span><span class="se">\n</span><span class="s2">def my_func(x:Class):</span><span class="se">\n</span><span class="s2">  pass</span><span class="se">\n</span><span class="s2">@typedispatch</span><span class="se">\n</span><span class="s2">def func(x: TensorImage): pass&quot;</span><span class="p">),</span> <span class="p">[</span><span class="s2">&quot;Class.my_func&quot;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extra_add" class="doc_header"><code>extra_add</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L183" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extra_add</code>(<strong><code>code</code></strong>)</p>
</blockquote>
<p>Catch adds to <code>__all__</code> required by a cell with <code>_all_=</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>オブジェクトがモジュールの <code>__all__</code>に自動的に追加されるように選択されていない場合があるため、手動で追加する必要があります。
これを行うには、次のコード <code>_all_ = ["name"]</code> を使用してエクスポートされたセルを作成します（単一の下線は意図的なものです）</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">extra_add</span><span class="p">(</span><span class="s1">&#39;_all_ = [&quot;func&quot;, &quot;func1&quot;, &quot;func2&quot;]&#39;</span><span class="p">),</span> <span class="p">([</span><span class="s2">&quot;&#39;func&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;func1&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;func2&#39;&quot;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">extra_add</span><span class="p">(</span><span class="s1">&#39;_all_ = [&quot;func&quot;,   &quot;func1&quot; , &quot;func2&quot;]&#39;</span><span class="p">),</span> <span class="p">([</span><span class="s2">&quot;&#39;func&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;func1&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;func2&#39;&quot;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">extra_add</span><span class="p">(</span><span class="s2">&quot;_all_ = [&#39;func&#39;,&#39;func1&#39;, &#39;func2&#39;]</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">),</span> <span class="p">([</span><span class="s2">&quot;&#39;func&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;func1&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;func2&#39;&quot;</span><span class="p">],</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">extra_add</span><span class="p">(</span><span class="s1">&#39;code</span><span class="se">\n\n</span><span class="s1">_all_ = [&quot;func&quot;, &quot;func1&quot;, &quot;func2&quot;]&#39;</span><span class="p">),</span> <span class="p">([</span><span class="s2">&quot;&#39;func&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;func1&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;func2&#39;&quot;</span><span class="p">],</span><span class="s1">&#39;code&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;test_add.txt&#39;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Bla</span><span class="se">\n</span><span class="s2">__all__ = [my_file, MyClas]</span><span class="se">\n</span><span class="s2">Bli&quot;</span><span class="p">)</span>
<span class="n">_add2add</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;new_function&#39;</span><span class="p">])</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> 
    <span class="n">test_eq</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="s2">&quot;Bla</span><span class="se">\n</span><span class="s2">__all__ = [my_file, MyClas, new_function]</span><span class="se">\n</span><span class="s2">Bli&quot;</span><span class="p">)</span>
<span class="n">_add2add</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;new_function</span><span class="si">{i}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)])</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span> 
    <span class="n">test_eq</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="s2">&quot;&quot;&quot;Bla</span>
<span class="s2">__all__ = [my_file, MyClas, new_function, new_function0, new_function1, new_function2, new_function3, new_function4,</span>
<span class="s2">           new_function5, new_function6, new_function7, new_function8, new_function9]</span>
<span class="s2">Bli&quot;&quot;&quot;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="relative_import" class="doc_header"><code>relative_import</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L205" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>relative_import</code>(<strong><code>name</code></strong>, <strong><code>fname</code></strong>)</p>
</blockquote>
<p>Convert a module <code>name</code> to a name relative to <code>fname</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>from を使用する場合</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lib_name.module.submodule</span> <span class="kn">import</span> <span class="n">bla</span>
</pre></div>
<p>は、ノートブックでは、次のように</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.module.submodule</span> <span class="kn">import</span> <span class="n">bla</span>
</pre></div>
<p>または</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.submodule</span> <span class="kn">import</span> <span class="n">bla</span>
</pre></div>
<p>と、場所に応じて変換する必要があります。</p>
<p>この関数は、それらのインポートの名前変更を扱います。</p>
<p>構文 <code>import module</code> は相対インポートでは機能しないため、この</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lib_name.module</span>
</pre></div>
<p>はそのままです。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">relative_import</span><span class="p">(</span><span class="s1">&#39;nbdev.core&#39;</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span><span class="o">/</span><span class="s1">&#39;nbdev&#39;</span><span class="o">/</span><span class="s1">&#39;data.py&#39;</span><span class="p">),</span> <span class="s1">&#39;.core&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">relative_import</span><span class="p">(</span><span class="s1">&#39;nbdev.core&#39;</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;nbdev&#39;</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;vision&#39;</span><span class="o">/</span><span class="s1">&#39;data.py&#39;</span><span class="p">),</span> <span class="s1">&#39;..core&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">relative_import</span><span class="p">(</span><span class="s1">&#39;nbdev.vision.transform&#39;</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;nbdev&#39;</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;vision&#39;</span><span class="o">/</span><span class="s1">&#39;data.py&#39;</span><span class="p">),</span> <span class="s1">&#39;.transform&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">relative_import</span><span class="p">(</span><span class="s1">&#39;nbdev.notebook.core&#39;</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;nbdev&#39;</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;data&#39;</span><span class="o">/</span><span class="s1">&#39;external.py&#39;</span><span class="p">),</span> <span class="s1">&#39;..notebook.core&#39;</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">relative_import</span><span class="p">(</span><span class="s1">&#39;nbdev.vision&#39;</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;nbdev&#39;</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;vision&#39;</span><span class="o">/</span><span class="s1">&#39;learner.py&#39;</span><span class="p">),</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="&#12521;&#12452;&#12502;&#12521;&#12522;&#12398;&#29983;&#25104;">&#12521;&#12452;&#12502;&#12521;&#12522;&#12398;&#29983;&#25104;<a class="anchor-link" href="#&#12521;&#12452;&#12502;&#12521;&#12522;&#12398;&#29983;&#25104;"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#12452;&#12531;&#12487;&#12483;&#12463;&#12473;&#12398;&#20445;&#23384;">&#12452;&#12531;&#12487;&#12483;&#12463;&#12473;&#12398;&#20445;&#23384;<a class="anchor-link" href="#&#12452;&#12531;&#12487;&#12483;&#12463;&#12473;&#12398;&#20445;&#23384;"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>関数とそれらが定義されているノートブックの間の対応を構築できるようにするには、インデックスを格納する必要があります。
これは、ライブラリ内のプライベートモジュール<code>_nbdev</code>で行われ、次の関数を使用して定義されます。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="reset_nbdev_module" class="doc_header"><code>reset_nbdev_module</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L230" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>reset_nbdev_module</code>()</p>
</blockquote>
<p>Create a skeletton for <code>_nbdev</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_nbdev_module" class="doc_header"><code>get_nbdev_module</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L257" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_nbdev_module</code>()</p>
</blockquote>
<p>Reads <code>_nbdev</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="save_nbdev_module" class="doc_header"><code>save_nbdev_module</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L271" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>save_nbdev_module</code>(<strong><code>mod</code></strong>)</p>
</blockquote>
<p>Save <code>mod</code> inside <code>_nbdev</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="&#12514;&#12472;&#12517;&#12540;&#12523;&#12398;&#29983;&#25104;">&#12514;&#12472;&#12517;&#12540;&#12523;&#12398;&#29983;&#25104;<a class="anchor-link" href="#&#12514;&#12472;&#12517;&#12540;&#12523;&#12398;&#29983;&#25104;"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_mod_file" class="doc_header"><code>create_mod_file</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L282" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_mod_file</code>(<strong><code>fname</code></strong>, <strong><code>nb_path</code></strong>)</p>
</blockquote>
<p>Create a module file for <code>fname</code>.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>ノートブックに<code># default_exp</code>とマークされたセルがあるたびに、新しいモジュールのファイル名が作成されます。
ノートブックのコレクションでは、ライブラリをビルドするたびに再作成されるため（ライブラリがクリーンであることを確認するため）、特定のモジュールを作成するノートブックは1つだけにする必要があります。
手動で作成したファイルは上書きされないことに注意してください（<code># default_exp</code>セルで定義されたモジュールの1つと同じ名前でない限り）、自分でクリーンアップする必要があります。</p>
<p><code>fname</code>は<code># default_exp</code>セルを含むノートブックです。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="add_init" class="doc_header"><code>add_init</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L325" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>add_init</code>(<strong><code>path</code></strong>)</p>
</blockquote>
<p>Add <code>__init__.py</code> in all subdirs of <code>path</code> containing python files if it's not there already</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">d</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;a&#39;</span><span class="o">/</span><span class="s1">&#39;f.py&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;a/b&#39;</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;a&#39;</span><span class="o">/</span><span class="s1">&#39;b&#39;</span><span class="o">/</span><span class="s1">&#39;f.py&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">touch</span><span class="p">()</span>
    <span class="n">add_init</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;__init__.py&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Path</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">/</span><span class="s1">&#39;a/b&#39;</span><span class="p">]:</span>
        <span class="k">assert</span> <span class="p">(</span><span class="n">e</span><span class="o">/</span><span class="s1">&#39;__init__.py&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="update_version" class="doc_header"><code>update_version</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L337" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>update_version</code>()</p>
</blockquote>
<p>Add or update <code>__version__</code> in the main <code>__init__.py</code> of the library</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="update_baseurl" class="doc_header"><code>update_baseurl</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L351" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>update_baseurl</code>()</p>
</blockquote>
<p>Add or update <code>baseurl</code> in <code>_config.yml</code> for the docs</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="notebook2script" class="doc_header"><code>notebook2script</code><a href="https://github.com/fastai/nbdev/tree/master/nbdev/export_ja.py#L361" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>notebook2script</code>(<strong><code>fname</code></strong>=<em><code>None</code></em>, <strong><code>silent</code></strong>=<em><code>False</code></em>, <strong><code>to_dict</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Convert notebooks matching <code>fname</code> to modules</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>＃export</code>で始まるセルを検索し、適切なモジュールに配置します。
<code>fname</code>が指定されていない場合、これは、<code>setting.ini</code>で定義された <code>nb_folder</code>でアンダースコアで始まらないすべてのノートブックを変換します。
それ以外の場合、 <code>fname</code>は単一のファイル名またはglob式にすることができます。</p>
<p><code>silent</code>はコマンドにステートメントを出力させず、<code>to_dict</code>はライブラリを辞書に変換するために内部的に使用されます。</p>

</div>
</div>
</div>
</div>
 

